<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>AI Detection Analysis</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet"/>
    <link href="{{ url_for('static', filename='css/style.css') }}" rel="stylesheet">
    <style>
        body { 
            background-color: #f8f9fa;
            margin: 0;
            padding: 0;
        }
        
        /* Navbar styling */
        .navbar {
            position: relative;
            background-color: #0d6efd;
            padding: 1rem 0;
            margin-bottom: 0;
            width: 100%;
        }
        
        .navbar-wrapper {
            width: 100%; /* Full width */
            max-width: calc(100% - 4rem); /* Screen width minus padding */
            margin: 0 auto;
            padding: 0 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .navbar-brand {
            color: white !important;
            font-size: 1.25rem;
            font-weight: 500;
            text-decoration: none;
        }
        
        .navbar-brand:hover {
            color: #e0e0e0 !important;
        }
        
        .btn-outline-light {
            border-color: white;
            color: white;
        }
        
        .btn-outline-light:hover {
            background-color: white;
            color: #0d6efd;
        }
        
        /* Theme toggle button */
        .theme-btn {
            position: fixed;
            top: 10px;
            right: 10px;
            z-index: 1000;
            background: white;
            border: 2px solid #dee2e6;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.2rem;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        /* Container - AUTOMATIC WIDTH */
        .container {
            width: 100%; /* Full width automatic */
            max-width: calc(100% - 4rem); /* Screen width minus padding */
            margin: 0 auto;
            padding: 0 2rem;
        }
        
        .ai-detection-chart-section {
            background-color: white;
            border: 1px solid #dee2e6;
            border-radius: 1rem;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            padding: 2rem;
            margin: 2rem 0;
            width: 100%; /* Full width of container */
        }
        
        .profile-photo {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 0.5rem;
            border: 4px solid #fff;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
            margin-bottom: 1rem;
        }
        
        .chart-container { 
            margin-bottom: 2rem; 
        }
        
        .bar-graph-section {
            background: #fff;
            border-radius: 1rem;
            box-shadow: 0 8px 20px #0001;
            padding: 2rem 0;
            margin-bottom: 1.5rem;
        }
        
        .chart-title { 
            text-align: center; 
            color: #0d6efd; 
            margin-bottom: 2rem;
            font-size: 1.5rem;
            font-weight: 600;
        }
        
        .bar-graph {
            display: flex;
            justify-content: center;
            align-items: flex-end;
            gap: 20px;
            height: 250px;
        }
        
        .bar-container { 
            width: 80px; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
        }
        
        .bar {
            width: 100%;
            border-radius: 0.5rem 0.5rem 0 0;
            box-shadow: 0 -2px 8px #0003;
            margin-bottom: 0.5rem;
            display: flex;
            align-items: flex-end;
            justify-content: center;
            transition: height 0.5s;
            font-weight: bold;
            color: #fff;
            font-size: 1rem;
            padding-bottom: 0.5rem;
        }
        
        .bar.human { 
            background: linear-gradient(to top, #28a745, #34ce57);
        }
        
        .bar.ai { 
            background: linear-gradient(to top, #dc3545, #e64555);
        }
        
        .bar-label { 
            font-weight: 600; 
            color: #444; 
            margin-top: 6px;
            font-size: 0.9rem;
        }
        
        .feature-grid { 
            display: grid; 
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); /* Automatic columns */
            gap: 1.5rem;
            margin-top: 2rem;
            width: 100%;
        }
        
        .feature-card { 
            background: white; 
            border: 1px solid #dee2e6; 
            border-radius: 0.5rem; 
            padding: 1.5rem;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .feature-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
        
        .feature-title { 
            font-weight: 600; 
            color: #495057; 
            margin-bottom: 0.5rem;
            font-size: 0.95rem;
        }
        
        .feature-value { 
            font-size: 1.5rem; 
            font-weight: bold; 
            color: #007bff; 
        }
        
        .confidence-section { 
            margin-top: 2rem; 
            padding-top: 1.5rem; 
            border-top: 1px dashed #dee2e6; 
            text-align: center;
        }
        
        .confidence-score { 
            font-size: 2.5rem; 
            font-weight: bold; 
            color: #198754;
            margin: 1rem 0;
        }
        
        .confidence-title { 
            font-weight: 600; 
            color: #212529;
            font-size: 1.1rem;
        }
        
        /* Responsive Design - Automatic */
        @media (max-width: 768px) {
            .navbar-wrapper {
                padding: 0 1rem;
                flex-direction: column;
                gap: 1rem;
                max-width: calc(100% - 2rem);
            }
            
            .navbar-brand {
                font-size: 1rem;
            }
            
            .container {
                padding: 0 1rem;
                max-width: calc(100% - 2rem);
            }
            
            .ai-detection-chart-section {
                padding: 1.5rem;
                margin: 1rem 0;
            }
            
            .feature-grid {
                grid-template-columns: 1fr; /* Single column on mobile */
            }
            
            .profile-photo {
                width: 100px;
                height: 100px;
            }
            
            .chart-title {
                font-size: 1.2rem;
            }
            
            .bar-graph {
                height: 200px;
            }
            
            .confidence-score {
                font-size: 2rem;
            }
        }
        
        @media (max-width: 480px) {
            .navbar-wrapper {
                padding: 0 0.5rem;
                max-width: calc(100% - 1rem);
            }
            
            .container {
                padding: 0 0.5rem;
                max-width: calc(100% - 1rem);
            }
            
            .ai-detection-chart-section {
                padding: 1rem;
                border-radius: 0.5rem;
            }
            
            .btn-outline-light {
                font-size: 0.875rem;
                padding: 0.375rem 0.75rem;
            }
        }
        
        /* Large screens - better spacing */
        @media (min-width: 1400px) {
            .container,
            .navbar-wrapper {
                max-width: calc(100% - 8rem); /* More padding on large screens */
                padding: 0 4rem;
            }
        }
        
        /* Animation for bars */
        @keyframes growBar {
            from {
                height: 0;
            }
        }
        
        .bar {
            animation: growBar 1s ease-out;
        }
    </style>
</head>
<body>
    
    
    <!-- Modified Navbar Structure -->
    <nav class="navbar">
        <div class="navbar-wrapper">
            <a class="navbar-brand" href="/">
                <i class="fas fa-brain me-2"></i>SmartHire.AI
            </a>
            <button class="btn btn-outline-light" onclick="window.close()">
                <i class="fas fa-times me-2"></i>Close Window
            </button>
        </div>
    </nav>
    
    <div class="container">
        <div class="ai-detection-chart-section">
            <div class="header text-center mb-4">
                <img src="https://www.digital-science.com/wp-content/uploads/2024/02/ai-academic-writing-research-stock-image-1.jpg" alt="Profile Photo" class="profile-photo">
                <h1><i class="fas fa-robot me-3"></i>AI Detection Analysis</h1>
                <h3 class="text-muted">{{ analysis.candidate_name }}</h3>
                <p class="text-muted mb-0">Resume: {{ analysis.resume_filename }}</p>
            </div>
            
            <div class="chart-container">
                <div class="bar-graph-section">
                    <div class="chart-title">AI vs Human Content Detection</div>
                    <div class="bar-graph">
                        <div class="bar-container">
                            <div class="bar human" id="humanBar" style="height: {{ analysis.human_percentage * 2 }}px;">
                                {{ analysis.human_percentage }}%
                            </div>
                            <div class="bar-label">Human</div>
                        </div>
                        <div class="bar-container">
                            <div class="bar ai" id="aiBar" style="height: {{ analysis.ai_percentage * 2 }}px;">
                                {{ analysis.ai_percentage }}%
                            </div>
                            <div class="bar-label">AI</div>
                        </div>
                    </div>
                </div>
                
                <div class="confidence-section">
                    <div class="confidence-title">AI Confidence â€” How much AI is present</div>
                    <div class="confidence-score">{{ analysis.ai_confidence }}%</div>
                    <p class="mb-0">
                        {% if analysis.ai_confidence >= 75 %}
                            <i class="fas fa-exclamation-triangle text-warning me-2"></i>
                            High confidence of AI-generated content.
                        {% elif analysis.ai_confidence >= 40 %}
                            <i class="fas fa-info-circle text-info me-2"></i>
                            Moderate confidence of AI-generated content.
                        {% else %}
                            <i class="fas fa-check-circle text-success me-2"></i>
                            Low confidence of AI-generated content.
                        {% endif %}
                    </p>
                    <small class="text-muted d-block mt-2">
                        Note: This is a model confidence estimate (0-100%). It indicates how sure the analyzer is that this resume contains AI-generated text.
                    </small>
                </div>
            </div>
            
            <div class="feature-grid">
                <div class="feature-card">
                    <div class="feature-title">Readability Score</div>
                    <div class="feature-value">{{ "%.1f"|format(analysis.features.readability) }}</div>
                    <small class="text-muted">Flesch Reading Ease</small>
                </div>
                <div class="feature-card">
                    <div class="feature-title">AI Phrases Detected</div>
                    <div class="feature-value">{{ analysis.features.ai_phrases }}</div>
                    <small class="text-muted">Common AI expressions</small>
                </div>
                <div class="feature-card">
                    <div class="feature-title">Sentiment Neutrality</div>
                    <div class="feature-value">{{ "%.2f"|format(analysis.features.sentiment_neutrality) }}</div>
                    <small class="text-muted">0.0 = Emotional, 1.0 = Neutral</small>
                </div>
                <div class="feature-card">
                    <div class="feature-title">Burstiness Score</div>
                    <div class="feature-value">{{ "%.2f"|format(analysis.features.burstiness) }}</div>
                    <small class="text-muted">Sentence length variation</small>
                </div>
                <div class="feature-card">
                    <div class="feature-title">Perplexity Score</div>
                    <div class="feature-value">{{ "%.2f"|format(analysis.features.perplexity) }}</div>
                    <small class="text-muted">Language predictability</small>
                </div>
                <div class="feature-card">
                    <div class="feature-title">Grammar Errors</div>
                    <div class="feature-value">{{ analysis.features.grammar_errors }}</div>
                    <small class="text-muted">Detected inconsistencies</small>
                </div>
                <div class="feature-card">
                    <div class="feature-title">Entropy Score</div>
                    <div class="feature-value">{{ "%.2f"|format(analysis.features.entropy_score) }}</div>
                    <small class="text-muted">Character predictability</small>
                </div>
                <div class="feature-card">
                    <div class="feature-title">Bullet Score</div>
                    <div class="feature-value">{{ "%.2f"|format(analysis.features.bullet_score) }}</div>
                    <small class="text-muted">Bullet point usage</small>
                </div>
                <div class="feature-card">
                    <div class="feature-title">Stopword Ratio</div>
                    <div class="feature-value">{{ "%.2f"|format(analysis.features.stopword_ratio) }}</div>
                    <small class="text-muted">Frequency of common words</small>
                </div>
            </div>
            
            <div class="alert alert-info mt-4">
                <h6><i class="fas fa-info-circle me-2"></i>How AI Detection Works</h6>
                <p class="mb-0">
                    Our AI detection algorithm analyzes multiple linguistic features including writing patterns,
                    phrase usage, sentiment neutrality, and grammatical perfection to determine the likelihood
                    that content was generated by an AI system.
                </p>
            </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
</body>
</html>
